<!DOCTYPE html>
<html>
<head>
      <meta charset="utf-8">
	  <title>web存储</title>
</head>
<body>
    <div id="left" style="float:left;">
        <input type="text" placeholder="请输入想查找的商品" id="inputButton" style="width:230px;height:50px;font-size:18px;">
        <input type="button" value="搜索" onclick="searchButton('inputButton')" style="width:170px;height:40px;"/>
        <p style="font-size:20px;">最近搜索</p>
        <p id="text" style="width:400px;height:50px;"></p>
   </div>
   <div id="right" style="float:left;">
        <input type="button" value="×" style="color: white;font-size:20px;margin-top:200px;" onclick="clearStorage('text')">
   </div> 
</body>
    <script>
         function searchButton(id){
            var data = document.getElementById(id).value;
            var time = new Date().getTime();
            localStorage.setItem(time,data);
            loadStorage('text');
            document.getElementById('inputButton').value=null;
         }
         var count=0;
         function loadStorage(id){
             for(var i=0;i<localStorage.length;i++){
                 var key=localStorage.key(i);
                 var value=localStorage.getItem(key);
             }
             if(value!=null) {
                   count++;
                   if(count>10){
                     alert("历史记录条数最多为10条");
                     localStorage.removeItem(key);
                   } 
                   else{
                    var input=document.createElement("input");
                    document.getElementById("text").appendChild(input);
                    input.type="button";
                    input.value=value;
                    input.style="margin-right:15px ;font-size:15px;margin-top:10px;";
                   }
             }
             if(value==null){
                 text.innerHTML=null;
             }
         }

         function clearStorage(id){
            localStorage.clear();
            alert("历史记录被全部清除吗？");
            loadStorage('text');
         }


    </script>

    
</html>